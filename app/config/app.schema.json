{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ptekwpdev App-Level Configuration",
  "description": "Schema for the static app-level configuration generated by app_bootstrap.sh",
  "type": "object",
  "additionalProperties": false,

  "properties": {
    "app_key": {
      "type": "string",
      "minLength": 1,
      "description": "Application key derived from the repo directory name"
    },

    "app_base": {
      "type": "string",
      "minLength": 1,
      "description": "Absolute path to the application base directory"
    },

    "config_base": {
      "type": "string",
      "minLength": 1,
      "description": "Absolute path to the user-level configuration directory (~/.ptekwpdev)"
    },

    "project_base": {
      "type": "string",
      "minLength": 1,
      "description": "Absolute path to the global project storage directory"
    },

    "backend_network": {
      "type": "string",
      "minLength": 1,
      "description": "Name of the backend Docker network shared by all projects"
    },

    "secrets": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "sqldb_root": {
          "type": "string",
          "minLength": 1
        },
        "sqldb_root_pass": {
          "type": "string",
          "minLength": 1
        }
      },
      "required": ["sqldb_root", "sqldb_root_pass"]
    },

    "database": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "sqldb_port": {
          "type": "string",
          "pattern": "^[0-9]+$"
        },
        "sqldb_image": {
          "type": "string",
          "minLength": 1
        },
        "sqldb_version": {
          "type": "string",
          "minLength": 1
        },
        "sqladmin_image": {
          "type": "string",
          "minLength": 1
        },
        "sqladmin_version": {
          "type": "string",
          "minLength": 1
        },
        "sqladmin_port": {
          "type": "string",
          "pattern": "^[0-9]+$"
        }
      },
      "required": [
        "sqldb_port",
        "sqldb_image",
        "sqldb_version",
        "sqladmin_image",
        "sqladmin_version",
        "sqladmin_port"
      ]
    },

    "assets": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "container": {
          "type": "string",
          "minLength": 1
        },
        "root_path": {
          "type": "string",
          "minLength": 1
        }
      },
      "required": ["container", "root_path"]
    },

    "wordpress_defaults": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "image": {
          "type": "string",
          "minLength": 1
        },
        "php_version": {
          "type": "string",
          "minLength": 1
        },
        "port": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535
        },
        "ssl_port": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535
        }
      },
      "required": ["image", "php_version", "port", "ssl_port"]
    }
  },

  "required": [
    "app_key",
    "app_base",
    "config_base",
    "project_base",
    "backend_network",
    "secrets",
    "database",
    "assets",
    "wordpress_defaults"
  ]
}